<?xml version="1.0" encoding="utf-8" ?>
<ContentPage x:Class="SeaBattle.MainPage"
             xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml">

    <ScrollView>
        <VerticalStackLayout Spacing="15" Padding="30,0">

            <!-- Server Controls -->
            <HorizontalStackLayout Spacing="10">
                <Button x:Name="StartServerBtn" 
                        Text="Start Server" 
                        Clicked="OnStartServerClicked"/>
                <Button x:Name="StopServerBtn" 
                        Text="Stop Server" 
                        Clicked="OnStopServerClicked"
                        IsEnabled="False"/>
            </HorizontalStackLayout>

            <!-- Game Status -->
            <Label x:Name="StatusLabel" 
                   Text="Not connected" 
                   FontSize="16" 
                   HorizontalOptions="Center"/>

            <!-- Available Servers -->
            <Label Text="Available Servers:" FontSize="14" FontAttributes="Bold"/>
            <ListView x:Name="ServersListView" 
                      HeightRequest="120"
                      ItemSelected="OnServerSelected">
                <ListView.ItemTemplate>
                    <DataTemplate>
                        <TextCell Text="{Binding Name}" Detail="{Binding IP}"/>
                    </DataTemplate>
                </ListView.ItemTemplate>
            </ListView>

            <!-- Ship Placement Controls -->
            <VerticalStackLayout Spacing="5">
                <HorizontalStackLayout Spacing="10">
                    <Button x:Name="RotateBtn" 
                            Text="Rotate Ship" 
                            Clicked="OnRotateClicked"/>
                </HorizontalStackLayout>
                <Label x:Name="ShipsProgressLabel"
                       Text="Ships: 0/3"
                       FontSize="12"
                       HorizontalOptions="Center"/>
            </VerticalStackLayout>

            <!-- Special Attacks -->
            <VerticalStackLayout Spacing="5" IsVisible="{Binding Source={x:Reference SpecialAttacksStack}, Path=IsVisible}">
                <Label Text="Special Attacks (One use per game):" FontSize="14" FontAttributes="Bold"/>
                <StackLayout x:Name="SpecialAttacksStack" Orientation="Horizontal" HorizontalOptions="Center" Spacing="10">
                    <Button x:Name="LineHorizontalBtn" 
                            Text="Horizontal Line" 
                            Clicked="OnLineHorizontalClicked"
                            BackgroundColor="LightGreen"/>
                    <Button x:Name="LineVerticalBtn" 
                            Text="Vertical Line" 
                            Clicked="OnLineVerticalClicked"
                            BackgroundColor="LightBlue"/>
                    <Button x:Name="Area3x3Btn" 
                            Text="3x3 Area" 
                            Clicked="OnArea3x3Clicked"
                            BackgroundColor="LightCoral"/>
                </StackLayout>
                <Label x:Name="SpecialAttackStatusLabel"
                       Text="Select special attack and click on enemy board"
                       FontSize="12"
                       HorizontalOptions="Center"/>
            </VerticalStackLayout>

            <!-- Game Board -->
            <Grid ColumnDefinitions="*,*" RowDefinitions="Auto,Auto,Auto">
                <Label Grid.Row="0" Grid.Column="0" Text="Your Board" FontSize="14" FontAttributes="Bold"/>
                <Label Grid.Row="0" Grid.Column="1" Text="Enemy Board" FontSize="14" FontAttributes="Bold"/>

                <Grid x:Name="PlayerGrid" Grid.Row="1" Grid.Column="0" 
                      HorizontalOptions="Center" Padding="5"/>
                <Grid x:Name="EnemyGrid" Grid.Row="1" Grid.Column="1" 
                      HorizontalOptions="Center" Padding="5"/>

                <Label x:Name="GameStatusLabel" Grid.Row="2" Grid.Column="0" Grid.ColumnSpan="2" 
                       Text="Place your ships (Use Rotate button)" 
                       HorizontalOptions="Center" FontSize="12"/>
            </Grid>

            <!-- Game Controls -->
            <Button x:Name="ReadyBtn" 
                    Text="Ready" 
                    Clicked="OnReadyClicked"
                    IsEnabled="False"/>
            <Button x:Name="DisconnectBtn" 
                    Text="Disconnect" 
                    Clicked="OnDisconnectClicked"
                    IsEnabled="False"/>

        </VerticalStackLayout>
    </ScrollView>
</ContentPage>